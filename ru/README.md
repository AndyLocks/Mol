[![Spring](https://img.shields.io/badge/Spring-a6e3a1?style=for-the-badge&logo=spring&labelColor=1e1e2e&logoColor=a6e3a1)](https://spring.io/)
[![neo4j](https://img.shields.io/badge/neo4j-89b4fa?style=for-the-badge&logo=neo4j&logoColor=cdd6f4&labelColor=1e1e2e)](https://neo4j.com/)

[**Documentation is also available in English!!!**](../README.md)

[**Documentation is also available in German!!!**](de/README.md)

---

# Молекулярный сервер реакций
Это экспериментальный проект, объединяющий химию и абстрактную математику через теорию категорий. В основе лежит оригинальная модель, в которой молекулы и химические реакции описываются как объекты и морфизмы в мультрикатегории.

Проект предлагает:

- формальное описание химических реакций как композиционных преобразований;
    
- собственный синтаксис для описания молекул, реакций и цепочек превращений;
    
- серверное API для анализа, хранения и поиска реакционных путей;
    
- возможную основу для симуляции синтеза, автоматического вывода продуктов и визуализации реакционных сетей.
    

Почему это может быть интересно?

- Для математиков: это живой пример применения категориального мышления в области естественных наук.
- Для химиков: это инструмент для анализа и формализации реакций без потери смысла.
    
- Для программистов: это архитектурно чистый и расширяемый проект на стыке языка, графов и алгебры.

# Язык Mol

Это специальный язык разработанный специально для этого проекта. Вот пример:

```
CH3 + 2O2 -> CO2 + 2H2O ; NaOH + HCl -> NaCl  
NaOH + HCl -> H2O  
  
(2H2O2) -> 2H2O + O2  
  
  
(Zn, HCl) -> ZnCl_2  
H2 + Cl2 -> 2HCl  
2H2 + O2 -> 2H2O  
2Na + Cl2 -> 2NaCl  
CaCO3 -> CaO + CO2

// just random comment lol
```

# Сервер реакций

Сервер принимающий запросы, обрабатывающий язык `mol` а также взаимодействующий с сервером neo4j, на котором и хранится граф всех реакций.

## Запуск

Установите docker и docker-compose перед запуском:

```sh
docker compose up
```

## API

- `/import` - импортирует файл `mol` и добавляет данные в граф. Пример запроса:

```sh
curl -X POST http://localhost:8080/import -F "file=@./example.mol"
```

- `/products` - выводит продукты, которые возможно получить из указанных реагентов:

```sh
curl -X GET http://localhost:8080/products\?asText\=true -H "Content-Type: application/json" -d '["H2", "Cl2"]'
```

Вывод:

```
[Cl2, H2] -> HCl
```

- `/reagents` - выводит реагенты, которые нужны, чтобы получить продукт:

```sh
curl -X GET http://localhost:8080/reagents\?asText\=true -d 'HCl'
```

Вывод:

```
[H2S, FeCl3] -> HCl
[H2, Cl2] -> HCl
```

Во всех случаях параметр `asText` при `true` выдает результат в виде текста. Если `false` или не указывать параметр, будет возвращен JSON файл:

```json
[
  {
    "reagents": [
      {
        "name": "H2S"
      },
      {
        "name": "FeCl3"
      }
    ],
    "product": {
      "name": "HCl"
    }
  },
  {
    "reagents": [
      {
        "name": "H2"
      },
      {
        "name": "Cl2"
      }
    ],
    "product": {
      "name": "HCl"
    }
  }
]
```

## Визуализация графа

После запуска на локальной машине вы можете посмотреть визуализацию графа перейдя по ссылке: http://localhost:7474. На этом порту открыт neo4j. Вот пример возможного вывода:

![[../images/graph.png]]

## CLI

CLI еще на стадии разработки, но им уже можно пользоваться. Он упрощает использование и позволяет общаться с сервером более удобно:

```sh
./mol products O2 CO
```

```sh
./mol reagents S
```

```sh
./mol import ./example.mol
```

Находится в папке `mol_cli`.
